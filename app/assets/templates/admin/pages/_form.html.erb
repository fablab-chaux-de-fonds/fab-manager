<form role="form"
      name="pageForm"
      class="form-horizontal"
      action="{{ actionUrl }}"
      ng-upload="submited(content)"
      upload-options-enable-rails-csrf="true"
      unsaved-warning-form
      novalidate>

  <input name="_method" type="hidden" ng-value="method">

  <section class="panel panel-default bg-light m-lg">
    <div class="panel-body m-r">

      <uib-alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">{{alert.msg}}</uib-alert>

      <!-- PAGE NAME -->
      <div class="form-group m-b-lg" ng-class="{'has-error': pageForm['page[name]'].$dirty && pageForm['page[name]'].$invalid}">
        <label for="name" class="col-sm-2 control-label">{{ 'page_form.name' | translate }} *</label>
        <div class="col-sm-4">
          <input ng-model="page.name"
                 type="text"
                 name="page[name]"
                 class="form-control"
                 id="page_name"
                 placeholder="{{'page_form.name' | translate}}"
                 required>
          <span class="help-block" ng-show="pageForm['page[name]'].$dirty && pageForm['page[name]'].$error.required" translate>{{ 'page_form.name_is_required' }}</span>
        </div>
      </div>

      <!-- PUBLISHED -->
      <div class="form-group m-b-lg" ng-class="{'has-error': pageForm['page[published]'].$dirty && pageForm['page[published]'].$invalid}">
        <label for="page[published]" class="control-label col-sm-2" translate>
          {{ 'page_form.publish_page' }}
        </label>
        <div class="col-sm-10">
          <input bs-switch
                 ng-model="page.published"
                 name="page[published]"
                 type="checkbox"
                 class="form-control"
                 switch-on-text="{{ 'yes' | translate }}"
                 switch-off-text="{{ 'no' | translate }}"
                 switch-animate="true"/>
          <input type="hidden" name="page[published]" value="{{page.published}}">
        </div>
      </div>

      <!-- SORT ORDER -->
      <div class="form-group m-b-lg" ng-class="{'has-error': pageForm['page[sort]'].$dirty && pageForm['page[sort]'].$invalid}">
        <label for="page[sort]" class="control-label col-sm-2" translate>
          {{ 'page_form.sort_page' }}
        </label>
        <div class="col-sm-10">
          <input ng-model="page.sort"
                 type="number"
                 name="page[sort]"
                 class="form-control"
                 id="page_sort"
                 placeholder="{{'page_form.sort' | translate}}">
        </div>
      </div>

      <div class="form-group m-b-xl">
        <label class="col-sm-2 control-label" translate>{{ 'page_form.page_content.page_data_context' }}</label>
        <div class="col-sm-10">
          <div class="fileinput input-group" data-provides="fileinput" ng-class="fileinputClass(page.page_content.page_data_context.custom_asset_file_attributes.attachment)">
            <div class="form-control" data-trigger="fileinput">
              <i class="glyphicon glyphicon-file fileinput-exists"></i> <span class="fileinput-filename">{{page.page_content.page_data_context.custom_asset_file_attributes.attachment}}</span>
            </div>
            <span class="input-group-addon btn btn-default btn-file">
                <span class="fileinput-new" translate>{{ 'browse' }}</span>
                <span class="fileinput-exists" translate>{{ 'change' }}</span>
                <input type="file"
                       id="tos_file"
                       name="custom_asset[custom_asset_file_attributes][attachment]"
                       accept="application/json"
                       required />
            </span>
          </div>
        </div>
      </div>


      <div class="form-group m-b-xl">
        <label class="col-sm-2 control-label" translate>{{ 'page_form.page_content.page_template' }}</label>
        <div class="col-sm-10">
          <div class="fileinput input-group" data-provides="fileinput" ng-class="fileinputClass(page.page_content.page_template.custom_asset_file_attributes.attachment)">
            <div class="form-control" data-trigger="fileinput">
              <i class="glyphicon glyphicon-file fileinput-exists"></i> <span class="fileinput-filename">{{page.page_content.page_template.custom_asset_file_attributes.attachment}}</span>
            </div>
            <span class="input-group-addon btn btn-default btn-file">
                <span class="fileinput-new" translate>{{ 'browse' }}</span>
                <span class="fileinput-exists" translate>{{ 'change' }}</span>
                <input type="file"
                       id="tos_file"
                       name="custom_asset[custom_asset_file_attributes][attachment]"
                       accept="text/html"
                       required />
            </span>
          </div>
        </div>
      </div>

      <div class="panel-footer no-padder">
        <input type="submit"
               value="{{ 'page_form.validate_your_page' | translate }}"
               class="r-b btn-valid btn btn-warning btn-block p-lg btn-lg text-u-c"
               ng-disabled="pageForm.$invalid"/>
      </div>
    </div>
  </section>
</form>
