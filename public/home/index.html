<div class="home">

  <section class="home-events col-lg-12 wrapper" ng-if="upcomingEvents.length > 0">
    <h4 class="text-sm m-t-sm">{{ 'fablab_s_next_events' | translate }} <a ui-sref="app.public.events_list" class="pull-right"><i class="fa fa-tags"></i> {{ 'every_events' | translate }}</a></h4>

    <div class="row" ng-repeat="event in (upcomingEvents.length/3 | array)">

      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4" ng-repeat="event in upcomingEvents.slice(3*$index, 3*$index + 3)">


        <div class="widget panel panel-default" ui-sref="app.public.events_show({id: event.id})">
          <div class="panel-heading picture" style="background-image: url({{event.event_image_medium}});" >
            <img src="data:image/png;base64," data-src="holder.js/100%x100%/text:&#xf03e;/font:FontAwesome/icon" bs-holder ng-if="!event.event_image" class="img-responsive">
          </div>
          <div class="panel-body" style="heigth:170px;">
            <div class="row">
              <div class="col-xs-9">
                <h1 class="m-b">{{event.title}}</h1>
              </div>
              <div class="col-xs-3">
                <span class="v-middle badge text-xs" ng-class="'bg-{{event.category.name | lowercase}}'">{{event.category.name}}</span>
              </div>
            </div>
            <p class="event-description" ng-bind-html="event.description | simpleText | humanize : 500 | breakFilter"></p>

            <hr/>
            <div class="row">
              <div class="col-sm-6 row m-b-sm">
                <i class="fa fa-calendar red col-xs-3 padder-icon"></i>
                <h6 class="m-n col-xs-9 " ng-hide="isOneDayEvent(event)">{{ 'from_date_to_date' | translate:{START:(event.start_date | amDateFormat:'L'), END:(event.end_date | amDateFormat:'L')} }}</h6>
                <h6 class="m-n col-xs-9 " ng-show="isOneDayEvent(event)">{{ 'on_the_date' | translate:{DATE:(event.start_date | amDateFormat:'L')} }}</h6>
              </div>
              <div class="col-sm-6 row m-b-sm">
                <i class="fa fa-clock-o red col-xs-3 padder-icon"></i>
                <h6 class="m-n col-xs-9">
                  <span ng-if="event.all_day == 'true'" translate>{{ 'all_day' }}</span>
                  <span ng-if="event.all_day == 'false'">{{ 'from_time_to_time' | translate:{START:(event.start_date | amDateFormat:'LT'), END:(event.end_date | amDateFormat:'LT')} }}</span>
                </h6>
              </div>
            </div>

            <div class="row">
              <div class="col-sm-6 row m-b-sm">
                <i class="fa fa-user red col-xs-3 padder-icon"></i>
                <h6 class="m-n col-xs-9 ">
                  <span ng-if="event.nb_free_places > 0">{{ 'still_available' | translate }} {{event.nb_free_places}}</span>
                  <span ng-if="!event.nb_total_places" translate>{{ 'free_entry' }}</span>
                  <span ng-if="event.nb_total_places > 0 && event.nb_free_places <= 0" translate>{{ 'event_full' }}</span>
                </h6>
              </div>
              <div class="col-sm-6 row m-b-sm">
                <i class="fa fa-bookmark red col-xs-3 padder-icon"></i>
                <h6 class="m-n col-xs-9">
                  <span ng-if="event.amount == 0" translate>{{ 'free_admission' }}</span>
                  <span ng-if="event.amount > 0">{{ 'full_price' | translate }} {{event.amount | currency}}</span>
                </h6>
              </div>
            </div>

            <div class="text-center clearfix ">
              <div class="btn btn-lg btn-warning bg-white b-2x rounded m-t-sm m-b-sm upper text-sm width-70" ui-sref="app.public.events_show({id: event.id})" ><span translate>{{ 'consult' }}</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="row wrapper-lg">
    <div class="col-md-8 col-xs-12 col-centered">
      <a href="{{ calendar.link }}" class="btn btn-lg btn-danger b-2x rounded m-t-xs ng-scope ng-binding"><i class="{{ calendar.logo }}"></i> {{ calendar.text }}</a>
    </div>
  </section>

  <section class="row wrapper-lg">
    <div class="col-md-4 col-xs-12">
      <div class="card home-card">
        <img class="card-img-top img-responsive" src="data:image/png;base64,{{discovery_lab.logo}}" alt="{{discovery_lab.title}}">
        <div class="card-body card-body-home">
          <p class="card-text">{{discovery_lab.desc}}</p>
        </div>
      </div>
    </div>

    <div class="col-md-4 col-xs-12">
      <div class="card home-card">
        <img class="card-img-top img-responsive" src="data:image/png;base64,{{open_lab.logo}}" alt="{{open_lab.title}}">
        <div class="card-body">
          <p class="card-text">{{open_lab.desc}}</p>
          <p class="card-text">{{open_lab.training.desc}}</p>
          <p>
            <a href="{{ open_lab.training.btn.link }}" class="btn btn-lg btn-danger b-2x rounded m-t-xs ng-scope ng-binding">{{ open_lab.training.btn.text }}</a>
          </p>
          <p class="card-text">{{open_lab.machine.desc}}</p>
          <p>
            <a href="{{ open_lab.machine.btn.link }}" class="btn btn-lg btn-danger b-2x rounded m-t-xs ng-scope ng-binding">{{ open_lab.machine.btn.text }}</a>
          </p>
        </div>
      </div>
    </div>

    <div class="col-md-4 col-xs-12">
      <div class="card home-card">
        <img class="card-img-top img-responsive" src="data:image/png;base64,{{expert_lab.logo}}" alt="{{expert_lab.title}}">
        <div class="card-body">
          <p class="card-text">{{expert_lab.desc}}</p>
        </div>
      </div>
    </div>
  </section>

  <section class="row wrapper-lg">
    <div class="col-md-8 col-xs-12 col-centered">
      <a href="{{address.link}}">
        <img src="data:image/png;base64,{{address.map}}" class="img-responsive img-centered">
      </a>
      <div ng-repeat="i in address.address">
        {{ i }}</br>
      </div>
    </div>
  </section>
</div>
